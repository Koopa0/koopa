# Koopa Configuration
# ==========================================
# Quick Start:
#   1. cp .env.example .env
#   2. Edit .env with your values
#   3. source .env
#   4. ./koopa serve

# ==========================================
# MODE REQUIREMENTS
# ==========================================
#
# | Variable       | CLI | Web | MCP |
# |----------------|-----|-----|-----|
# | GEMINI_API_KEY | ✓   | ✓   | ✓   |
# | DATABASE_URL   | ✓   | ✓   | ✓   |
# | HMAC_SECRET    |     | ✓   |     |
#
# ✓ = Required

# ==========================================
# REQUIRED: All Modes
# ==========================================

# Gemini API Key (REQUIRED)
# Get from: https://aistudio.google.com/apikey
export GEMINI_API_KEY=your-gemini-api-key-here

# PostgreSQL Database URL (REQUIRED)
# Format: postgres://user:password@host:port/database?sslmode=disable
# This overrides any postgres_* settings in config.yaml
export DATABASE_URL="postgres://koopa:yourpassword@localhost:5432/koopa?sslmode=disable"

# ==========================================
# REQUIRED: Web Mode Only (./koopa serve)
# ==========================================

# HMAC Secret for CSRF protection (REQUIRED for serve mode)
# Generate: openssl rand -base64 32
# Must be at least 32 characters
export HMAC_SECRET=generate-with-openssl-rand-base64-32

# ==========================================
# OPTIONAL: Model Settings
# ==========================================

# Model name (default: gemini-2.5-flash)
# export KOOPA_MODEL_NAME=gemini-2.5-pro

# Temperature 0.0-1.0 (default: 0.7)
# export KOOPA_TEMPERATURE=0.7

# Max tokens per response (default: 2048)
# export KOOPA_MAX_TOKENS=2048

# ==========================================
# OPTIONAL: CORS (serve mode only)
# ==========================================

# Allowed origins for API access (comma-separated)
# Default: http://localhost:4200
# export KOOPA_CORS_ORIGINS=http://localhost:4200,http://localhost:3000

# ==========================================
# OPTIONAL: Advanced Settings
# ==========================================

# Max conversation history (default: 100, max: 10000)
# export KOOPA_MAX_HISTORY_MESSAGES=100

# RAG documents to retrieve (default: 3)
# export KOOPA_RAG_TOP_K=3

# Debug logging
# export DEBUG=1

# ==========================================
# OPTIONAL: Observability
# ==========================================

# Datadog APM (optional)
# export DD_API_KEY=your-datadog-api-key

# ==========================================
# ADVANCED: ~/.koopa/config.yaml
# ==========================================
# Only needed for MCP servers configuration.
# See: config.example.yaml
#
# Priority: DATABASE_URL > config.yaml > defaults
